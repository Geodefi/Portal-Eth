{
  "address": "0x3506980d4d72f056d12216cA7c853000f19e6382",
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "ID",
          "type": "uint256"
        }
      ],
      "name": "Approved",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "ID",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "CONTROLLER",
          "type": "address"
        }
      ],
      "name": "ControllerChanged",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "senate",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "expiry",
          "type": "uint256"
        }
      ],
      "name": "NewSenate",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "TYPE",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "ID",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "CONTROLLER",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "deadline",
          "type": "uint256"
        }
      ],
      "name": "Proposed",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "MAX_PROPOSAL_DURATION",
      "outputs": [
        {
          "internalType": "uint32",
          "name": "",
          "type": "uint32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "MAX_SENATE_PERIOD",
      "outputs": [
        {
          "internalType": "uint32",
          "name": "",
          "type": "uint32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "MIN_PROPOSAL_DURATION",
      "outputs": [
        {
          "internalType": "uint32",
          "name": "",
          "type": "uint32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0xa68d8374fbf1f4fd98ad236c47923c8c25bce17a9aa87a8388115b74a7e327a7",
  "receipt": {
    "to": null,
    "from": "0x2C95BC18Fd9382a07776D416EeF6c2FEb3AD2A8C",
    "contractAddress": "0x3506980d4d72f056d12216cA7c853000f19e6382",
    "transactionIndex": 1,
    "gasUsed": "1106957",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x033dd6d7dbd253fdff5d452130808fbf145fa066889fdf91b722e450d3cd6a20",
    "transactionHash": "0xa68d8374fbf1f4fd98ad236c47923c8c25bce17a9aa87a8388115b74a7e327a7",
    "logs": [],
    "blockNumber": 9149153,
    "cumulativeGasUsed": "1152899",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 1,
  "solcInputHash": "0d9b4f013ad8b24d94c0978b4d3f3ea8",
  "metadata": "{\"compiler\":{\"version\":\"0.8.7+commit.e28d00a7\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"ID\",\"type\":\"uint256\"}],\"name\":\"Approved\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"ID\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"CONTROLLER\",\"type\":\"address\"}],\"name\":\"ControllerChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"senate\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"expiry\",\"type\":\"uint256\"}],\"name\":\"NewSenate\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"TYPE\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"ID\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"CONTROLLER\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"deadline\",\"type\":\"uint256\"}],\"name\":\"Proposed\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"MAX_PROPOSAL_DURATION\",\"outputs\":[{\"internalType\":\"uint32\",\"name\":\"\",\"type\":\"uint32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MAX_SENATE_PERIOD\",\"outputs\":[{\"internalType\":\"uint32\",\"name\":\"\",\"type\":\"uint32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MIN_PROPOSAL_DURATION\",\"outputs\":[{\"internalType\":\"uint32\",\"name\":\"\",\"type\":\"uint32\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"author\":\"Ice Bear & Crash Bandicoot\",\"details\":\"review: DataStoreModule for the IsolatedStorage logic.review: Reserved TYPEs are defined within globals/id_type.solSENATE_EXPIRY is not mandatory to utilize. Simply set it to MAX_UINT256 if rescueSenate is not needed.There are 3 ways to set a new Senate: 1. With a proposal TYPE 1. Proposal's controller becomes the new Senate, refreshes the expiry. 2. Current Senate can call changeSenate, which doesn't change the expiry 3. As a circuit breaker: If senate is expired, then rescue senate can be called by governance.Currently, there are no way to set a new Governance.Contracts relying on this library must use GeodeModuleLib.DualGovernanceThis is an external library, requires deployment.\",\"events\":{\"Proposed(uint256,uint256,address,uint256)\":{\"custom:section\":\"** EVENTS **\"}},\"kind\":\"dev\",\"methods\":{\"approveProposal(GeodeModuleLib.DualGovernance storage,DataStoreModuleLib.IsolatedStorage storage,uint256)\":{\"details\":\"Senate is not able to approve approved proposalsSenate is not able to approve expired proposals\",\"params\":{\"id\":\"given ID proposal that has will be approved by Senate\"}},\"changeIdCONTROLLER(DataStoreModuleLib.IsolatedStorage storage,uint256,address)\":{\"details\":\"this operation can not be reverted by the old CONTROLLER!!!can not provide address(0), try 0x000000000000000000000000000000000000dEaD\"},\"changeSenate(GeodeModuleLib.DualGovernance storage,address)\":{\"details\":\"Does not change the expiry\"},\"getProposal(GeodeModuleLib.DualGovernance storage,uint256)\":{\"custom:section\":\"** GETTER FUNCTIONS **\",\"custom:visibility\":\"-> view-external\"},\"isUpgradeAllowed(GeodeModuleLib.DualGovernance storage,address,address)\":{\"details\":\"provided for _authorizeUpgradecurrentImplementation should always be UUPS._getImplementation()currentImplementation or zero as proposedImplementation will return false*\"},\"propose(GeodeModuleLib.DualGovernance storage,DataStoreModuleLib.IsolatedStorage storage,address,uint256,bytes,uint256)\":{\"details\":\"DATASTORE[id] will not be updated until the proposal is approvedProposals can NEVER be overriden\"},\"rescueSenate(GeodeModuleLib.DualGovernance storage,address)\":{\"details\":\"Obviously, Governance needs to wait for SENATE_EXPIRY.Refreshes the expiry\"}},\"stateVariables\":{\"MAX_SENATE_PERIOD\":{\"details\":\"\\\"MAX\\\" underlines a new senate can be set without expecting an expiry\"}},\"title\":\"GML: Geode Module Library\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"MAX_SENATE_PERIOD()\":{\"notice\":\"if expiry is utilized, a senate can be active for a year.\"},\"MIN_PROPOSAL_DURATION()\":{\"notice\":\"a proposal can have a duration between 1 days to 4 weeks (inclusive)\"},\"approveProposal(GeodeModuleLib.DualGovernance storage,DataStoreModuleLib.IsolatedStorage storage,uint256)\":{\"notice\":\"approves a proposal and records given data to DataStorespecific changes for the reserved types (1, 2, 3) are implemented here, any other addition should take place in Portal, as not related. Note that GM has additional logic for package type approvals.\"},\"changeIdCONTROLLER(DataStoreModuleLib.IsolatedStorage storage,uint256,address)\":{\"notice\":\"change the CONTROLLER of an ID\"},\"changeSenate(GeodeModuleLib.DualGovernance storage,address)\":{\"notice\":\"It is useful to be able to change the Senate's address without changing the expiry.\"},\"isUpgradeAllowed(GeodeModuleLib.DualGovernance storage,address,address)\":{\"notice\":\"Check if it is allowed to change the package version to given proposedImplementation.\"},\"propose(GeodeModuleLib.DualGovernance storage,DataStoreModuleLib.IsolatedStorage storage,address,uint256,bytes,uint256)\":{\"notice\":\"generates a new ID with given TYPE and NAME, proposes it to be owned by a CONTROLLER.\"},\"rescueSenate(GeodeModuleLib.DualGovernance storage,address)\":{\"notice\":\"changes Senate in a scenerio where the current Senate acts maliciously! * We are sure this will not be the case, but creating a method for possible recovery is a must.Normally, Governance creates Senate Proposals frequently to signal it does not have * any intent of malicious overtake. note: If Governance does not send a Senate Proposal \\\"a while\\\" before the SENATE_EXPIRY, * we recommend users to take their money out.\"}},\"notice\":\"Dual Governance & Limited Upgradability: Administration of the Isolated Storage with a Dual Governance consisting a Governance and a Senate. Administration of a UUPS contract with Limited Upgradability for Packages like Portal, LiquidityPool.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/Portal/modules/GeodeModule/libs/GeodeModuleLib.sol\":\"GeodeModuleLib\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"contracts/Portal/globals/id_type.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.7;\\n\\n/**\\n * @notice ID_TYPE is an internal library that acts like an ENUM.\\n *\\n * @dev Used within the limited upgradability pattern:\\n *\\n * NONE & GAP: should not be used.\\n *\\n * Dual Governance:\\n * * SENATE: points to a proposal that will update the current SENATE address of a package(or Portal).\\n * * CONTRACT UPGRADE: proposal to change the given contract's implementation. TYPE should be package's TYPE.\\n *\\n * Users:\\n * * OPERATOR: permissionned Node Operators (hosted on Portal).\\n * * POOL: permissionless staking pools (hosted on Portal).\\n *\\n * Packages: (hosted on StakeModuleLib)\\n * * An ID can only point to 1(one) Package version' implementation address at a given point.\\n * * Can be upgraded by a dual governance, via pullUpgrade.\\n * * * Portal's dual governance consists of a Governance Token(governance) and a Senate(senate).\\n * * * A Package's dual governance consists of Portal(governance) and the pool owner(senate).\\n * * Built by utilizing the Modules.\\n * * LiquidityPool and WithdrawalContract are some examples.\\n *\\n * Middlewares: (hosted on StakeModuleLib)\\n * * An ID can point to multiple Middleware version' implementation address at the same time.\\n * * Can not be upgraded.\\n * * Do not have any guides to build really.\\n * * Currently only gETHMiddlewares\\n *\\n *  Limits:\\n *  * We simply set limits to separate a group of types from others. Like Packages and Middlewares.\\n *\\n * @dev all LIMIT parameters are exclusive, prevents double usage.\\n */\\nlibrary ID_TYPE {\\n  /// @notice TYPE 0: *invalid*\\n  uint256 internal constant NONE = 0;\\n\\n  /// @notice TYPE 1: Senate\\n  uint256 internal constant SENATE = 1;\\n\\n  /// --\\n\\n  /// @notice TYPE 3: Limit: exclusive, minimum TYPE that will be percieved as a user\\n  uint256 internal constant LIMIT_MIN_USER = 3;\\n\\n  /// @notice TYPE 4: USER: Permissionned Node Operator\\n  uint256 internal constant OPERATOR = 4;\\n\\n  /// @notice TYPE 5: USER: Staking Pool\\n  uint256 internal constant POOL = 5;\\n\\n  /// @notice TYPE 9999: Limit: exclusive, maximum TYPE that will be percieved as a user\\n  uint256 internal constant LIMIT_MAX_USER = 9999;\\n\\n  /// --\\n\\n  /// @notice TYPE 10000: Limit: exclusive, minimum TYPE that will be percieved as a package\\n  uint256 internal constant LIMIT_MIN_PACKAGE = 10000;\\n\\n  /// @notice TYPE 10001: Package: Portal is also a package\\n  uint256 internal constant PACKAGE_PORTAL = 10001;\\n\\n  /// @notice TYPE 10011: Package: The Withdrawal Credential Contract\\n  uint256 internal constant PACKAGE_WITHDRAWAL_CONTRACT = 10011;\\n\\n  /// @notice TYPE 10021: Package: A Liquidity Pool\\n  uint256 internal constant PACKAGE_LIQUIDITY_POOL = 10021;\\n\\n  /// @notice TYPE 19999: Limit: exclusive, maximum TYPE that will be percieved as a package\\n  uint256 internal constant LIMIT_MAX_PACKAGE = 19999;\\n\\n  /// --\\n\\n  /// @notice TYPE 20000: Limit: exclusive, minimum TYPE that will be percieved as a middleware\\n  uint256 internal constant LIMIT_MIN_MIDDLEWARE = 20000;\\n\\n  /// @notice TYPE 20011: Middleware: A new gETH interface\\n  uint256 internal constant MIDDLEWARE_GETH = 20011;\\n\\n  /// @notice TYPE 29999: Limit: exclusive, maximum TYPE that will be percieved as a middleware\\n  uint256 internal constant LIMIT_MAX_MIDDLEWARE = 29999;\\n}\\n\",\"keccak256\":\"0x08dd2d86c870ecd80a7f81a52ed45d362ca425359b8c27329bf16ef6e8764626\",\"license\":\"MIT\"},\"contracts/Portal/globals/macros.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.7;\\n\\n// no floats in solidity. If needed, PERCENTAGE_DENOMINATOR always represents \\\"1\\\" (100%)\\nuint256 constant PERCENTAGE_DENOMINATOR = 10 ** 10;\\n\",\"keccak256\":\"0xf3a2ec72fdfc804f088c4f7245f1dbb881b23fae868ce7d8efa3f66c6008f60d\",\"license\":\"MIT\"},\"contracts/Portal/globals/reserved_key_space.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.7;\\n\\n/**\\n * @notice Reserved Key Space for DataStoreModule\\n * * helps preventing potential dev mistakes.\\n * * helps keeping track of them.\\n * * limits keys to bytes32.\\n *\\n * @dev utilize a key with rks.key\\n * @dev keep this list in alphabetical order, per module.\\n * @dev NEVER name your variables something else other than *its string value*.\\n * @dev ! array keys with readUint returns the lenght of the array !\\n */\\nlibrary RESERVED_KEY_SPACE {\\n  /**\\n   * @dev reserved on GeodeModuleLib\\n   */\\n\\n  /**\\n   * @custom:type address\\n   * @custom:definition representing body of an id\\n   */\\n  bytes32 internal constant CONTROLLER = \\\"CONTROLLER\\\";\\n\\n  /**\\n   * @custom:type bytes\\n   * @custom:definition base of an id\\n   */\\n  bytes32 internal constant NAME = \\\"NAME\\\";\\n\\n  /**\\n   * @custom:type uint\\n   * @custom:definition identifier for an id, based on ID_TYPEs\\n   */\\n  bytes32 internal constant TYPE = \\\"TYPE\\\";\\n\\n  /**\\n   * @dev reserved on StakeModuleLib\\n   */\\n\\n  /**\\n   * @custom:type uint, relational, pool[operator]\\n   * @custom:definition number of active validators run by an operator for a pool\\n   */\\n  bytes32 internal constant activeValidators = \\\"activeValidators\\\";\\n\\n  /**\\n   * @custom:type uint, relational, pool[operator]\\n   * @custom:definition max amount of validators for an operator to run, for a specific pool.\\n   */\\n  bytes32 internal constant allowance = \\\"allowance\\\";\\n\\n  /**\\n   * @custom:type uint\\n   * @custom:definition special operator that has max allowance, if threshold is hit for the pool\\n   */\\n  bytes32 internal constant fallbackOperator = \\\"fallbackOperator\\\";\\n\\n  /**\\n   * @custom:type uint\\n   * @custom:definition treshold calculated with given percentage value for fallback operator to be activated\\n   */\\n  bytes32 internal constant fallbackThreshold = \\\"fallbackThreshold\\\";\\n\\n  /**\\n   * @custom:type uint\\n   * @custom:definition fee of the pool or operator, will be shadowed by priorFee if switching\\n   */\\n  bytes32 internal constant fee = \\\"fee\\\";\\n\\n  /**\\n   * @custom:type uint\\n   * @custom:definition effective timestamp pointing to the latest delayed fee change\\n   */\\n  bytes32 internal constant feeSwitch = \\\"feeSwitch\\\";\\n\\n  /**\\n   * @custom:type uint\\n   * @custom:definition the initiation timestamp of a \\\"user\\\" TYPE id\\n   */\\n  bytes32 internal constant initiated = \\\"initiated\\\";\\n\\n  /**\\n   * @custom:type address\\n   * @custom:definition bound liquidity pool of a pool\\n   */\\n  bytes32 internal constant liquidityPool = \\\"liquidityPool\\\";\\n\\n  /**\\n   * @custom:type address\\n   * @custom:definition receiver address for yield seperation functionality\\n   * * will receive minted gETH to given receiver instead of increasing pricePerShare\\n   */\\n  bytes32 internal constant yieldReceiver = \\\"yieldReceiver\\\";\\n\\n  /**\\n   * @custom:type address\\n   * @custom:definition hot wallet for pool and operators, automatooor\\n   */\\n  bytes32 internal constant maintainer = \\\"maintainer\\\";\\n\\n  /**\\n   * @custom:type address array, direct call returns length\\n   * @custom:definition contracts with more than one versions, ex: gETHMiddlewares of a pool\\n   */\\n  bytes32 internal constant middlewares = \\\"middlewares\\\";\\n\\n  /**\\n   * @custom:type uint\\n   * @custom:definition effective timestamp pointing to the latest delayed validator period change\\n   */\\n  bytes32 internal constant periodSwitch = \\\"periodSwitch\\\";\\n\\n  /**\\n   * @custom:type uint\\n   * @custom:definition fee that will be effective if fee is currently switching\\n   */\\n  bytes32 internal constant priorFee = \\\"priorFee\\\";\\n\\n  /**\\n   * @custom:type uint\\n   * @custom:definition period that will be effective if validatorPeriod is currently switching\\n   */\\n  bytes32 internal constant priorPeriod = \\\"priorPeriod\\\";\\n\\n  /**\\n   * @custom:type uint, bool\\n   * @custom:definition 1(true) if id is a private pool\\n   */\\n  bytes32 internal constant privatePool = \\\"privatePool\\\";\\n\\n  /**\\n   * @custom:type uint, relational, pool[operator]\\n   * @custom:definition proposed validator count for pool-operator pair.\\n   */\\n  bytes32 internal constant proposedValidators = \\\"proposedValidators\\\";\\n\\n  /**\\n   * @custom:type uint\\n   * @custom:definition timestamp of the date of the latest imprisonment for an operator\\n   */\\n  bytes32 internal constant release = \\\"release\\\";\\n\\n  /**\\n   * @custom:type uint\\n   * @custom:definition 32 eth is secured, per proposed-but-not-yet-activated validator\\n   */\\n  bytes32 internal constant secured = \\\"secured\\\";\\n\\n  /**\\n   * @custom:type uint\\n   * @custom:definition collateral waiting to be staked, in wei\\n   */\\n  bytes32 internal constant surplus = \\\"surplus\\\";\\n\\n  /**\\n   * @custom:type uint\\n   * @custom:definition sum of all allowances for a pool\\n   */\\n\\n  bytes32 internal constant totalAllowance = \\\"totalAllowance\\\";\\n\\n  /**\\n   * @custom:type uint\\n   * @custom:definition seconds, time that passes before the expected exit is reached for a validator\\n   */\\n  bytes32 internal constant validatorPeriod = \\\"validatorPeriod\\\";\\n\\n  /**\\n   * @custom:type bytes array, direct call returns length\\n   * @custom:definition lists all (any state) validators' pubkeys for a pool, or an operator\\n   */\\n  bytes32 internal constant validators = \\\"validators\\\";\\n\\n  /**\\n   * @custom:type address\\n   * @custom:definition custodian of validator funds for a pool\\n   */\\n  bytes32 internal constant withdrawalContract = \\\"withdrawalContract\\\";\\n\\n  /**\\n   * @custom:type bytes\\n   * @custom:definition derived from withdrawalContract\\n   */\\n  bytes32 internal constant withdrawalCredential = \\\"withdrawalCredential\\\";\\n\\n  /**\\n   * @custom:type uint\\n   * @custom:definition size of the internal wallet, which accrues fees etc. in wei\\n   */\\n  bytes32 internal constant wallet = \\\"wallet\\\";\\n\\n  /**\\n   * @custom:type address\\n   * @custom:definition whitelist contract for the pool\\n   */\\n  bytes32 internal constant whitelist = \\\"whitelist\\\";\\n\\n  /**\\n   * @dev reserved on OracleExtensionLib\\n   */\\n\\n  /**\\n   * @custom:type uint, relational, pool[operator]\\n   * @custom:definition number of alienated validators run by an operator for a pool\\n   */\\n  bytes32 internal constant alienValidators = \\\"alienValidators\\\";\\n}\\n\",\"keccak256\":\"0x8e3f1954e49738a3915efe5aaf41bb1f06f3bcb7f730ea6f21d9283dd1264548\",\"license\":\"MIT\"},\"contracts/Portal/modules/DataStoreModule/libs/DataStoreModuleLib.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity =0.8.7;\\n\\n/**\\n * @title DSML: DataStore Module Library\\n *\\n * @notice A Storage Management Library created for the contracts and modules that inherits DataStoreModule (DSM).\\n * Enables Dynamic Structs with unlimited key space.\\n * Provides an Isolated Storage Layout with IDs and KEYs.\\n * Focusing on upgradable contracts with various data types to create a\\n * * sustainable development environment.\\n * In summary, extra gas cost that would be saved with Storage packing are\\n * * ignored to create dynamic structs.\\n *\\n * @dev Distinct id and key pairs SHOULD return different storage slots. No collisions!\\n * @dev IDs are the representation of an entity with any given key as properties.\\n * @dev review: Reserved TYPEs are defined within globals/id_type.sol\\n * @dev review: For a safer development process, NEVER use the IsolatedStorage with strings. Refer to globals/reserved_key_space.sol\\n *\\n * @dev While it is a good practice for keeping a record;\\n * * TYPE for ID is NOT mandatory, an ID might not have an explicit type.\\n * * e.g., When a relational data is added with getKey, like allowance, it has a unique ID but no TYPE.\\n * * Thus there are no checks for types or keys.\\n *\\n * @dev readUint(id, arrayName) returns the lenght of array.\\n *\\n * @dev Contracts relying on this library must use DataStoreModuleLib.IsolatedStorage\\n * @dev This is an internal library, requires NO deployment.\\n *\\n * @author Ice Bear & Crash Bandicoot\\n */\\n\\nlibrary DataStoreModuleLib {\\n  /**\\n   * @notice Main Struct for reading/writing operations for given (id, key) pairs.\\n   *\\n   * @param allIdsByType type => id[], optional categorization for IDs, can be directly accessed.\\n   * @param uintData keccak(id, key) =>  returns uint256\\n   * @param bytesData keccak(id, key) => returns bytes\\n   * @param addressData keccak(id, key) =>  returns address\\n   * @param __gap keep the struct size at 16\\n   *\\n   * @dev any other storage type can be expressed as uint or bytes. E.g., bools are 0/1 as uints.\\n   */\\n  struct IsolatedStorage {\\n    mapping(uint256 => uint256[]) allIdsByType;\\n    mapping(bytes32 => uint256) uintData;\\n    mapping(bytes32 => bytes) bytesData;\\n    mapping(bytes32 => address) addressData;\\n    uint256[12] __gap;\\n  }\\n\\n  /**\\n   * @custom:section                           ** HELPERS **\\n   *\\n   * @custom:visibility -> pure-internal\\n   */\\n\\n  /**\\n   * @notice generalized method of generating an ID\\n   *\\n   * @dev Some TYPEs may require permissionless creation, allowing anyone to claim any ID;\\n   * meaning malicious actors can claim names to mislead people. To prevent this\\n   * TYPEs will be considered during ID generation.\\n   */\\n  function generateId(bytes memory _name, uint256 _type) internal pure returns (uint256 id) {\\n    id = uint256(keccak256(abi.encodePacked(_name, _type)));\\n  }\\n\\n  /**\\n   * @notice hash of given ID and a KEY defines the key for the IsolatedStorage\\n   * @return key bytes32, hash.\\n   **/\\n  function getKey(uint256 id, bytes32 param) internal pure returns (bytes32 key) {\\n    key = keccak256(abi.encodePacked(id, param));\\n  }\\n\\n  /**\\n   * @custom:section                           ** DATA GETTERS **\\n   *\\n   * @custom:visibility -> view-internal\\n   */\\n\\n  function readUint(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key\\n  ) internal view returns (uint256 data) {\\n    data = self.uintData[getKey(_id, _key)];\\n  }\\n\\n  function readBytes(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key\\n  ) internal view returns (bytes memory data) {\\n    data = self.bytesData[getKey(_id, _key)];\\n  }\\n\\n  function readAddress(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key\\n  ) internal view returns (address data) {\\n    data = self.addressData[getKey(_id, _key)];\\n  }\\n\\n  /**\\n   * @custom:section                           ** ARRAY GETTERS **\\n   *\\n   * @custom:visibility -> view-internal\\n   */\\n\\n  function readUintArray(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key,\\n    uint256 _index\\n  ) internal view returns (uint256 data) {\\n    data = self.uintData[getKey(_index, getKey(_id, _key))];\\n  }\\n\\n  function readBytesArray(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key,\\n    uint256 _index\\n  ) internal view returns (bytes memory data) {\\n    data = self.bytesData[getKey(_index, getKey(_id, _key))];\\n  }\\n\\n  function readAddressArray(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key,\\n    uint256 _index\\n  ) internal view returns (address data) {\\n    data = self.addressData[getKey(_index, getKey(_id, _key))];\\n  }\\n\\n  /**\\n   * @custom:section                           ** STATE MODIFYING FUNCTIONS **\\n   *\\n   * @custom:visibility -> internal\\n   */\\n\\n  /**\\n   * @custom:subsection                        ** DATA SETTERS **\\n   */\\n\\n  function writeUint(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key,\\n    uint256 _data\\n  ) internal {\\n    self.uintData[getKey(_id, _key)] = _data;\\n  }\\n\\n  function addUint(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key,\\n    uint256 _addend\\n  ) internal {\\n    self.uintData[getKey(_id, _key)] += _addend;\\n  }\\n\\n  function subUint(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key,\\n    uint256 _minuend\\n  ) internal {\\n    self.uintData[getKey(_id, _key)] -= _minuend;\\n  }\\n\\n  function writeBytes(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key,\\n    bytes memory _data\\n  ) internal {\\n    self.bytesData[getKey(_id, _key)] = _data;\\n  }\\n\\n  function writeAddress(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key,\\n    address _data\\n  ) internal {\\n    self.addressData[getKey(_id, _key)] = _data;\\n  }\\n\\n  /**\\n   * @custom:subsection                        ** ARRAY SETTERS **\\n   */\\n\\n  function appendUintArray(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key,\\n    uint256 _data\\n  ) internal {\\n    bytes32 arrayKey = getKey(_id, _key);\\n    self.uintData[getKey(self.uintData[arrayKey]++, arrayKey)] = _data;\\n  }\\n\\n  function appendBytesArray(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key,\\n    bytes memory _data\\n  ) internal {\\n    bytes32 arrayKey = getKey(_id, _key);\\n    self.bytesData[getKey(self.uintData[arrayKey]++, arrayKey)] = _data;\\n  }\\n\\n  function appendAddressArray(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key,\\n    address _data\\n  ) internal {\\n    bytes32 arrayKey = getKey(_id, _key);\\n    self.addressData[getKey(self.uintData[arrayKey]++, arrayKey)] = _data;\\n  }\\n\\n  /**\\n   * @custom:subsection                        ** BATCH ARRAY SETTERS **\\n   */\\n\\n  function appendUintArrayBatch(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key,\\n    uint256[] memory _data\\n  ) internal {\\n    bytes32 arrayKey = getKey(_id, _key);\\n    uint256 arrayLen = self.uintData[arrayKey];\\n\\n    for (uint256 i = 0; i < _data.length; ) {\\n      self.uintData[getKey(arrayLen++, arrayKey)] = _data[i];\\n      unchecked {\\n        i += 1;\\n      }\\n    }\\n\\n    self.uintData[arrayKey] = arrayLen;\\n  }\\n\\n  function appendBytesArrayBatch(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key,\\n    bytes[] memory _data\\n  ) internal {\\n    bytes32 arrayKey = getKey(_id, _key);\\n    uint256 arrayLen = self.uintData[arrayKey];\\n\\n    for (uint256 i = 0; i < _data.length; ) {\\n      self.bytesData[getKey(arrayLen++, arrayKey)] = _data[i];\\n      unchecked {\\n        i += 1;\\n      }\\n    }\\n\\n    self.uintData[arrayKey] = arrayLen;\\n  }\\n\\n  function appendAddressArrayBatch(\\n    IsolatedStorage storage self,\\n    uint256 _id,\\n    bytes32 _key,\\n    address[] memory _data\\n  ) internal {\\n    bytes32 arrayKey = getKey(_id, _key);\\n    uint256 arrayLen = self.uintData[arrayKey];\\n\\n    for (uint256 i = 0; i < _data.length; ) {\\n      self.addressData[getKey(arrayLen++, arrayKey)] = _data[i];\\n      unchecked {\\n        i += 1;\\n      }\\n    }\\n\\n    self.uintData[arrayKey] = arrayLen;\\n  }\\n}\\n\",\"keccak256\":\"0x2d74bdce38dca73f27695089cac1345d962794837fb0e5a042fa3a33bd6ee2ed\",\"license\":\"MIT\"},\"contracts/Portal/modules/GeodeModule/libs/GeodeModuleLib.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.7;\\n\\n// globals\\nimport {PERCENTAGE_DENOMINATOR} from \\\"../../../globals/macros.sol\\\";\\nimport {ID_TYPE} from \\\"../../../globals/id_type.sol\\\";\\nimport {RESERVED_KEY_SPACE as rks} from \\\"../../../globals/reserved_key_space.sol\\\";\\n// libraries\\nimport {DataStoreModuleLib as DSML} from \\\"../../DataStoreModule/libs/DataStoreModuleLib.sol\\\";\\n\\n/**\\n * @title GML: Geode Module Library\\n *\\n * @notice Dual Governance & Limited Upgradability:\\n * Administration of the Isolated Storage with a Dual Governance consisting a Governance and a Senate.\\n * Administration of a UUPS contract with Limited Upgradability for Packages like Portal, LiquidityPool.\\n *\\n * @dev review: DataStoreModule for the IsolatedStorage logic.\\n * @dev review: Reserved TYPEs are defined within globals/id_type.sol\\n *\\n * @dev SENATE_EXPIRY is not mandatory to utilize. Simply set it to MAX_UINT256 if rescueSenate is not needed.\\n *\\n * @dev There are 3 ways to set a new Senate:\\n * 1. With a proposal TYPE 1. Proposal's controller becomes the new Senate, refreshes the expiry.\\n * 2. Current Senate can call changeSenate, which doesn't change the expiry\\n * 3. As a circuit breaker: If senate is expired, then rescue senate can be called by governance.\\n * @dev Currently, there are no way to set a new Governance.\\n *\\n *\\n * @dev Contracts relying on this library must use GeodeModuleLib.DualGovernance\\n * @dev This is an external library, requires deployment.\\n *\\n * @author Ice Bear & Crash Bandicoot\\n */\\nlibrary GeodeModuleLib {\\n  using DSML for DSML.IsolatedStorage;\\n\\n  /**\\n   * @custom:section                           ** STRUCTS **\\n   */\\n\\n  /**\\n   * @notice Giving the control of a specific ID to proposed CONTROLLER.\\n   *\\n   * @param TYPE: refer to globals/id_type.sol\\n   * @param CONTROLLER: the address that refers to the change that is proposed by given proposal.\\n   * * This slot can refer to the controller of an id, a new implementation contract, a new Senate etc.\\n   * @param NAME: DataStore generates ID by keccak(name, type)\\n   * @param deadline: refers to last timestamp until a proposal expires, limited by MAX_PROPOSAL_DURATION\\n   * * Expired proposals can not be approved by Senate\\n   * * Expired proposals can not be overriden by new proposals\\n   **/\\n  struct Proposal {\\n    address CONTROLLER;\\n    uint256 TYPE;\\n    bytes NAME;\\n    uint256 deadline;\\n  }\\n\\n  /**\\n   * @notice Dual Governance allows 2 parties to manage a package with proposals and approvals.\\n   * @param GOVERNANCE a community that works to improve the core product and ensures its adoption in the DeFi ecosystem\\n   * Suggests updates, such as new operators, contract/package upgrades, a new Senate (without any permission to force them)\\n   * @param SENATE An address that protects the users by controlling the state of governance, contract updates and other crucial changes\\n   * @param APPROVED_UPGRADE only 1 implementation contract SHOULD be \\\"approved\\\" at any given time.\\n   * @param SENATE_EXPIRY refers to the last timestamp that SENATE can continue operating. Might not be utilized. Limited by MAX_SENATE_PERIOD\\n   * @param PACKAGE_TYPE every package has a specific TYPE. Defined in globals/id_type.sol\\n   * @param CONTRACT_VERSION always refers to the upgrade proposal ID. Does NOT increase uniformly like one might expect.\\n   * @param proposals till approved, proposals are kept separated from the Isolated Storage\\n   * @param __gap keep the struct size at 16\\n   **/\\n  struct DualGovernance {\\n    address GOVERNANCE;\\n    address SENATE;\\n    address APPROVED_UPGRADE;\\n    uint256 SENATE_EXPIRY;\\n    uint256 PACKAGE_TYPE;\\n    uint256 CONTRACT_VERSION;\\n    mapping(uint256 => Proposal) proposals;\\n    uint256[9] __gap;\\n  }\\n\\n  /**\\n   * @custom:section                           ** CONSTANTS **\\n   */\\n\\n  /// @notice a proposal can have a duration between 1 days to 4 weeks (inclusive)\\n  uint32 public constant MIN_PROPOSAL_DURATION = 1 days;\\n  uint32 public constant MAX_PROPOSAL_DURATION = 4 weeks;\\n\\n  /// @notice if expiry is utilized, a senate can be active for a year.\\n  /// @dev \\\"MAX\\\" underlines a new senate can be set without expecting an expiry\\n  uint32 public constant MAX_SENATE_PERIOD = 365 days;\\n\\n  /**\\n   * @custom:section                           ** EVENTS **\\n   */\\n  event Proposed(uint256 indexed TYPE, uint256 ID, address CONTROLLER, uint256 deadline);\\n  event Approved(uint256 ID);\\n  event NewSenate(address senate, uint256 expiry);\\n  event ControllerChanged(uint256 indexed ID, address CONTROLLER);\\n\\n  /**\\n   * @custom:section                           ** MODIFIERS **\\n   */\\n  modifier onlyGovernance(DualGovernance storage self) {\\n    require(msg.sender == self.GOVERNANCE, \\\"GML:GOVERNANCE role needed\\\");\\n    _;\\n  }\\n\\n  modifier onlySenate(DualGovernance storage self) {\\n    require(msg.sender == self.SENATE, \\\"GML:SENATE role needed\\\");\\n    require(block.timestamp < self.SENATE_EXPIRY, \\\"GML:SENATE expired\\\");\\n    _;\\n  }\\n\\n  modifier onlyController(DSML.IsolatedStorage storage DATASTORE, uint256 id) {\\n    require(msg.sender == DATASTORE.readAddress(id, rks.CONTROLLER), \\\"GML:CONTROLLER role needed\\\");\\n    _;\\n  }\\n\\n  /**\\n   * @custom:section                           ** LIMITED UUPS VERSION CONTROL **\\n   *\\n   * @custom:visibility -> view-external\\n   */\\n\\n  /**\\n   * @notice Check if it is allowed to change the package version to given proposedImplementation.\\n   * @dev provided for _authorizeUpgrade\\n   * @dev currentImplementation should always be UUPS._getImplementation()\\n   * @dev currentImplementation or zero as proposedImplementation will return false\\n   **/\\n  function isUpgradeAllowed(\\n    DualGovernance storage self,\\n    address proposedImplementation,\\n    address currentImplementation\\n  ) external view returns (bool) {\\n    return\\n      (self.APPROVED_UPGRADE != address(0)) &&\\n      (proposedImplementation != currentImplementation) &&\\n      (self.APPROVED_UPGRADE == proposedImplementation);\\n  }\\n\\n  /**\\n   * @custom:section                           ** GETTER FUNCTIONS **\\n   *\\n   * @custom:visibility -> view-external\\n   */\\n\\n  function getProposal(\\n    DualGovernance storage self,\\n    uint256 id\\n  ) external view returns (Proposal memory) {\\n    return self.proposals[id];\\n  }\\n\\n  /**\\n   * @custom:section                           ** SETTER FUNCTIONS **\\n   */\\n\\n  /**\\n   * @custom:subsection                        ** INTERNAL **\\n   *\\n   * @custom:visibility -> internal\\n   */\\n  function _setSenate(DualGovernance storage self, address _newSenate, uint256 _expiry) internal {\\n    self.SENATE = _newSenate;\\n    self.SENATE_EXPIRY = _expiry;\\n\\n    emit NewSenate(self.SENATE, self.SENATE_EXPIRY);\\n  }\\n\\n  /**\\n   * @custom:subsection                        ** ONLY GOVERNANCE **\\n   *\\n   * @custom:visibility -> external\\n   */\\n\\n  /**\\n   * @notice generates a new ID with given TYPE and NAME, proposes it to be owned by a CONTROLLER.\\n   * @dev DATASTORE[id] will not be updated until the proposal is approved\\n   * @dev Proposals can NEVER be overriden\\n   */\\n  function propose(\\n    DualGovernance storage self,\\n    DSML.IsolatedStorage storage DATASTORE,\\n    address _CONTROLLER,\\n    uint256 _TYPE,\\n    bytes calldata _NAME,\\n    uint256 duration\\n  ) external onlyGovernance(self) returns (uint256 id) {\\n    id = DSML.generateId(_NAME, _TYPE);\\n\\n    require(self.proposals[id].deadline == 0, \\\"GML:already proposed\\\");\\n    require((DATASTORE.readBytes(id, rks.NAME)).length == 0, \\\"GML:ID already exist\\\");\\n    require(_CONTROLLER != address(0), \\\"GML:CONTROLLER can NOT be ZERO\\\");\\n    require((_TYPE != ID_TYPE.NONE) && (_TYPE != ID_TYPE.POOL), \\\"GML:TYPE is NONE or POOL\\\");\\n    require(\\n      (duration >= MIN_PROPOSAL_DURATION) && (duration <= MAX_PROPOSAL_DURATION),\\n      \\\"GML:invalid proposal duration\\\"\\n    );\\n\\n    uint256 _deadline = block.timestamp + duration;\\n\\n    self.proposals[id] = Proposal({\\n      CONTROLLER: _CONTROLLER,\\n      TYPE: _TYPE,\\n      NAME: _NAME,\\n      deadline: _deadline\\n    });\\n\\n    emit Proposed(_TYPE, id, _CONTROLLER, _deadline);\\n  }\\n\\n  /**\\n   * @notice changes Senate in a scenerio where the current Senate acts maliciously!\\n   * * We are sure this will not be the case, but creating a method for possible recovery is a must.\\n   * @notice Normally, Governance creates Senate Proposals frequently to signal it does not have\\n   * * any intent of malicious overtake.\\n   * note: If Governance does not send a Senate Proposal \\\"a while\\\" before the SENATE_EXPIRY,\\n   * * we recommend users to take their money out.\\n   * @dev Obviously, Governance needs to wait for SENATE_EXPIRY.\\n   * @dev Refreshes the expiry\\n   */\\n  function rescueSenate(\\n    DualGovernance storage self,\\n    address _newSenate\\n  ) external onlyGovernance(self) {\\n    require(block.timestamp > self.SENATE_EXPIRY, \\\"GML:cannot rescue yet\\\");\\n\\n    _setSenate(self, _newSenate, block.timestamp + MAX_SENATE_PERIOD);\\n  }\\n\\n  /**\\n   * @custom:subsection                        ** ONLY SENATE **\\n   *\\n   * @custom:visibility -> external\\n   */\\n\\n  /**\\n   * @notice approves a proposal and records given data to DataStore\\n   * @notice specific changes for the reserved types (1, 2, 3) are implemented here,\\n   * any other addition should take place in Portal, as not related.\\n   * Note that GM has additional logic for package type approvals.\\n   * @param id given ID proposal that has will be approved by Senate\\n   * @dev Senate is not able to approve approved proposals\\n   * @dev Senate is not able to approve expired proposals\\n   */\\n  function approveProposal(\\n    DualGovernance storage self,\\n    DSML.IsolatedStorage storage DATASTORE,\\n    uint256 id\\n  ) external onlySenate(self) returns (address _controller, uint256 _type, bytes memory _name) {\\n    require(self.proposals[id].deadline > block.timestamp, \\\"GML:NOT an active proposal\\\");\\n\\n    _controller = self.proposals[id].CONTROLLER;\\n    _type = self.proposals[id].TYPE;\\n    _name = self.proposals[id].NAME;\\n\\n    DATASTORE.writeUint(id, rks.TYPE, _type);\\n    DATASTORE.writeAddress(id, rks.CONTROLLER, _controller);\\n    DATASTORE.writeBytes(id, rks.NAME, _name);\\n    DATASTORE.allIdsByType[_type].push(id);\\n\\n    if (_type == ID_TYPE.SENATE) {\\n      _setSenate(self, _controller, block.timestamp + MAX_SENATE_PERIOD);\\n    } else if (_type == self.PACKAGE_TYPE) {\\n      self.APPROVED_UPGRADE = _controller;\\n    }\\n\\n    // important\\n    self.proposals[id].deadline = block.timestamp;\\n\\n    emit Approved(id);\\n  }\\n\\n  /**\\n   * @notice It is useful to be able to change the Senate's address without changing the expiry.\\n   * @dev Does not change the expiry\\n   */\\n  function changeSenate(DualGovernance storage self, address _newSenate) external onlySenate(self) {\\n    _setSenate(self, _newSenate, self.SENATE_EXPIRY);\\n  }\\n\\n  /**\\n   * @custom:section                           ** ONLY CONTROLLER **\\n   *\\n   * @custom:visibility -> external\\n   */\\n\\n  /**\\n   * @notice change the CONTROLLER of an ID\\n   * @dev this operation can not be reverted by the old CONTROLLER!!!\\n   * @dev can not provide address(0), try 0x000000000000000000000000000000000000dEaD\\n   */\\n  function changeIdCONTROLLER(\\n    DSML.IsolatedStorage storage DATASTORE,\\n    uint256 id,\\n    address newCONTROLLER\\n  ) external onlyController(DATASTORE, id) {\\n    require(newCONTROLLER != address(0), \\\"GML:CONTROLLER can not be zero\\\");\\n\\n    uint256 typeOfId = DATASTORE.readUint(id, rks.TYPE);\\n    require(\\n      typeOfId > ID_TYPE.LIMIT_MIN_USER && typeOfId < ID_TYPE.LIMIT_MAX_USER,\\n      \\\"GML:ID TYPE is NOT user\\\"\\n    );\\n\\n    DATASTORE.writeAddress(id, rks.CONTROLLER, newCONTROLLER);\\n\\n    emit ControllerChanged(id, newCONTROLLER);\\n  }\\n}\\n\",\"keccak256\":\"0xef31598f6cc9d2a1ef087c69b7184773532747a2cf5caf7ede566e05111d21fd\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x61130f61003a600b82828239805160001a60731461002d57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600436106100a85760003560e01c8063944ee22d11610070578063944ee22d146101655780639c04df5b14610184578063b21f2188146101b3578063bd968216146101be578063e51d9aa3146101c857600080fd5b806309589522146100ad5780630bde2bc3146100cf5780633f98381a146100ef5780636989fbc614610117578063929fbdfb14610145575b600080fd5b8180156100b957600080fd5b506100cd6100c8366004611150565b6101e8565b005b8180156100db57600080fd5b506100cd6100ea366004610ff0565b61038f565b6101026100fd36600461101c565b610452565b60405190151581526020015b60405180910390f35b81801561012357600080fd5b50610137610132366004611058565b6104a6565b60405190815260200161010e565b61015861015336600461112e565b61082a565b60405161010e91906111fa565b61016f6201518081565b60405163ffffffff909116815260200161010e565b81801561019057600080fd5b506101a461019f366004611102565b61093e565b60405161010e939291906111ca565b61016f6301e1338081565b61016f6224ea0081565b8180156101d457600080fd5b506100cd6101e3366004610ff0565b610c0e565b828261020282826921a7a72a2927a62622a960b11b610cbc565b6001600160a01b0316336001600160a01b0316146102675760405162461bcd60e51b815260206004820152601a60248201527f474d4c3a434f4e54524f4c4c455220726f6c65206e656564656400000000000060448201526064015b60405180910390fd5b6001600160a01b0383166102bd5760405162461bcd60e51b815260206004820152601e60248201527f474d4c3a434f4e54524f4c4c45522063616e206e6f74206265207a65726f0000604482015260640161025e565b60006102d18686635459504560e01b610cf0565b90506003811180156102e4575061270f81105b6103305760405162461bcd60e51b815260206004820152601760248201527f474d4c3a49442054595045206973204e4f542075736572000000000000000000604482015260640161025e565b61034986866921a7a72a2927a62622a960b11b87610d1a565b6040516001600160a01b038516815285907ff0d0c255199b45799d6fd3623dce5e99a7cb09d662754eff92d8d0e73a537f0a9060200160405180910390a2505050505050565b815482906001600160a01b031633146103ea5760405162461bcd60e51b815260206004820152601a60248201527f474d4c3a474f5645524e414e434520726f6c65206e6565646564000000000000604482015260640161025e565b826003015442116104355760405162461bcd60e51b815260206004820152601560248201527411d3530e98d85b9b9bdd081c995cd8dd59481e595d605a1b604482015260640161025e565b61044d83836104486301e1338042611248565b610d63565b505050565b60028301546000906001600160a01b0316158015906104835750816001600160a01b0316836001600160a01b031614155b801561049e575060028401546001600160a01b038481169116145b949350505050565b865460009088906001600160a01b031633146105045760405162461bcd60e51b815260206004820152601a60248201527f474d4c3a474f5645524e414e434520726f6c65206e6565646564000000000000604482015260640161025e565b61054585858080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152508a9250610dc8915050565b600081815260068b016020526040902060030154909250156105a05760405162461bcd60e51b815260206004820152601460248201527311d3530e985b1c9958591e481c1c9bdc1bdcd95960621b604482015260640161025e565b6105b28883634e414d4560e01b610dfc565b51156105f75760405162461bcd60e51b815260206004820152601460248201527311d3530e925108185b1c9958591e48195e1a5cdd60621b604482015260640161025e565b6001600160a01b03871661064d5760405162461bcd60e51b815260206004820152601e60248201527f474d4c3a434f4e54524f4c4c45522063616e204e4f54206265205a45524f0000604482015260640161025e565b851580159061065d575060058614155b6106a95760405162461bcd60e51b815260206004820152601860248201527f474d4c3a54595045206973204e4f4e45206f7220504f4f4c0000000000000000604482015260640161025e565b6201518083108015906106bf57506224ea008311155b61070b5760405162461bcd60e51b815260206004820152601d60248201527f474d4c3a696e76616c69642070726f706f73616c206475726174696f6e000000604482015260640161025e565b60006107178442611248565b90506040518060800160405280896001600160a01b0316815260200188815260200187878080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920182905250938552505050602091820184905285815260068d018252604090819020835181546001600160a01b0319166001600160a01b0390911617815583830151600182015590830151805191926107c792600285019290910190610f3b565b50606091820151600390910155604080518581526001600160a01b038b16602082015290810183905288917f1ff68ed75922b8da2edb71149ae5de14f24d950ccc82c7cc12254771915426c3910160405180910390a25050979650505050505050565b61085e604051806080016040528060006001600160a01b031681526020016000815260200160608152602001600081525090565b6000828152600684016020908152604091829020825160808101845281546001600160a01b0316815260018201549281019290925260028101805492939192918401916108aa9061129e565b80601f01602080910402602001604051908101604052809291908181526020018280546108d69061129e565b80156109235780601f106108f857610100808354040283529160200191610923565b820191906000526020600020905b81548152906001019060200180831161090657829003601f168201915b50505050508152602001600382015481525050905092915050565b6001830154600090819060609086906001600160a01b0316331461099d5760405162461bcd60e51b815260206004820152601660248201527511d3530e94d153905511481c9bdb19481b995959195960521b604482015260640161025e565b806003015442106109e55760405162461bcd60e51b815260206004820152601260248201527111d3530e94d15390551148195e1c1a5c995960721b604482015260640161025e565b60008581526006880160205260409020600301544210610a475760405162461bcd60e51b815260206004820152601a60248201527f474d4c3a4e4f5420616e206163746976652070726f706f73616c000000000000604482015260640161025e565b6000858152600688016020526040902080546001820154600290920180546001600160a01b039092169650919450610a7e9061129e565b80601f0160208091040260200160405190810160405280929190818152602001828054610aaa9061129e565b8015610af75780601f10610acc57610100808354040283529160200191610af7565b820191906000526020600020905b815481529060010190602001808311610ada57829003601f168201915b50505050509150610b1c85635459504560e01b8589610eae909392919063ffffffff16565b610b3586866921a7a72a2927a62622a960b11b87610d1a565b610b488686634e414d4560e01b85610ed6565b60008381526020878152604082208054600181810183559184529190922001869055831415610b8957610b8487856104486301e1338042611248565b610bb3565b8660040154831415610bb3576002870180546001600160a01b0319166001600160a01b0386161790555b60008581526006880160205260409081902042600390910155517f3ad93af63cb7967b23e4fb500b7d7d28b07516325dcf341f88bebf959d82c1cb90610bfc9087815260200190565b60405180910390a15093509350939050565b600182015482906001600160a01b03163314610c655760405162461bcd60e51b815260206004820152601660248201527511d3530e94d153905511481c9bdb19481b995959195960521b604482015260640161025e565b80600301544210610cad5760405162461bcd60e51b815260206004820152601260248201527111d3530e94d15390551148195e1c1a5c995960721b604482015260640161025e565b61044d83838560030154610d63565b6000836003016000610cce8585610f0f565b81526020810191909152604001600020546001600160a01b0316949350505050565b6000836001016000610d028585610f0f565b81526020019081526020016000205490509392505050565b80846003016000610d2b8686610f0f565b815260200190815260200160002060006101000a8154816001600160a01b0302191690836001600160a01b0316021790555050505050565b6001830180546001600160a01b0319166001600160a01b0384169081179091556003840182905560408051918252602082018390527f3f34afe456fb5b36c04b5d1e2ef0750086747ac542262fbf14a0b1aae5fd7ee8910160405180910390a1505050565b60008282604051602001610ddd9291906111a8565b60408051601f1981840301815291905280516020909101209392505050565b6060836002016000610e0e8585610f0f565b81526020019081526020016000208054610e279061129e565b80601f0160208091040260200160405190810160405280929190818152602001828054610e539061129e565b8015610ea05780601f10610e7557610100808354040283529160200191610ea0565b820191906000526020600020905b815481529060010190602001808311610e8357829003601f168201915b505050505090509392505050565b80846001016000610ebf8686610f0f565b815260208101919091526040016000205550505050565b80846002016000610ee78686610f0f565b81526020019081526020016000209080519060200190610f08929190610f3b565b5050505050565b604080516020808201949094528082019290925280518083038201815260609092019052805191012090565b828054610f479061129e565b90600052602060002090601f016020900481019282610f695760008555610faf565b82601f10610f8257805160ff1916838001178555610faf565b82800160010185558215610faf579182015b82811115610faf578251825591602001919060010190610f94565b50610fbb929150610fbf565b5090565b5b80821115610fbb5760008155600101610fc0565b80356001600160a01b0381168114610feb57600080fd5b919050565b6000806040838503121561100357600080fd5b8235915061101360208401610fd4565b90509250929050565b60008060006060848603121561103157600080fd5b8335925061104160208501610fd4565b915061104f60408501610fd4565b90509250925092565b600080600080600080600060c0888a03121561107357600080fd5b873596506020880135955061108a60408901610fd4565b945060608801359350608088013567ffffffffffffffff808211156110ae57600080fd5b818a0191508a601f8301126110c257600080fd5b8135818111156110d157600080fd5b8b60208285010111156110e357600080fd5b60208301955080945050505060a0880135905092959891949750929550565b60008060006060848603121561111757600080fd5b505081359360208301359350604090920135919050565b6000806040838503121561114157600080fd5b50508035926020909101359150565b60008060006060848603121561116557600080fd5b833592506020840135915061104f60408501610fd4565b6000815180845261119481602086016020860161126e565b601f01601f19169290920160200192915050565b600083516111ba81846020880161126e565b9190910191825250602001919050565b60018060a01b03841681528260208201526060604082015260006111f1606083018461117c565b95945050505050565b6020815260018060a01b03825116602082015260208201516040820152600060408301516080606084015261123260a084018261117c565b9050606084015160808401528091505092915050565b6000821982111561126957634e487b7160e01b600052601160045260246000fd5b500190565b60005b83811015611289578181015183820152602001611271565b83811115611298576000848401525b50505050565b600181811c908216806112b257607f821691505b602082108114156112d357634e487b7160e01b600052602260045260246000fd5b5091905056fea264697066735822122042f29ada45c4cd80c5c0bc51b44755f11c600157464399f790226483dc08646d64736f6c63430008070033",
  "deployedBytecode": "0x73000000000000000000000000000000000000000030146080604052600436106100a85760003560e01c8063944ee22d11610070578063944ee22d146101655780639c04df5b14610184578063b21f2188146101b3578063bd968216146101be578063e51d9aa3146101c857600080fd5b806309589522146100ad5780630bde2bc3146100cf5780633f98381a146100ef5780636989fbc614610117578063929fbdfb14610145575b600080fd5b8180156100b957600080fd5b506100cd6100c8366004611150565b6101e8565b005b8180156100db57600080fd5b506100cd6100ea366004610ff0565b61038f565b6101026100fd36600461101c565b610452565b60405190151581526020015b60405180910390f35b81801561012357600080fd5b50610137610132366004611058565b6104a6565b60405190815260200161010e565b61015861015336600461112e565b61082a565b60405161010e91906111fa565b61016f6201518081565b60405163ffffffff909116815260200161010e565b81801561019057600080fd5b506101a461019f366004611102565b61093e565b60405161010e939291906111ca565b61016f6301e1338081565b61016f6224ea0081565b8180156101d457600080fd5b506100cd6101e3366004610ff0565b610c0e565b828261020282826921a7a72a2927a62622a960b11b610cbc565b6001600160a01b0316336001600160a01b0316146102675760405162461bcd60e51b815260206004820152601a60248201527f474d4c3a434f4e54524f4c4c455220726f6c65206e656564656400000000000060448201526064015b60405180910390fd5b6001600160a01b0383166102bd5760405162461bcd60e51b815260206004820152601e60248201527f474d4c3a434f4e54524f4c4c45522063616e206e6f74206265207a65726f0000604482015260640161025e565b60006102d18686635459504560e01b610cf0565b90506003811180156102e4575061270f81105b6103305760405162461bcd60e51b815260206004820152601760248201527f474d4c3a49442054595045206973204e4f542075736572000000000000000000604482015260640161025e565b61034986866921a7a72a2927a62622a960b11b87610d1a565b6040516001600160a01b038516815285907ff0d0c255199b45799d6fd3623dce5e99a7cb09d662754eff92d8d0e73a537f0a9060200160405180910390a2505050505050565b815482906001600160a01b031633146103ea5760405162461bcd60e51b815260206004820152601a60248201527f474d4c3a474f5645524e414e434520726f6c65206e6565646564000000000000604482015260640161025e565b826003015442116104355760405162461bcd60e51b815260206004820152601560248201527411d3530e98d85b9b9bdd081c995cd8dd59481e595d605a1b604482015260640161025e565b61044d83836104486301e1338042611248565b610d63565b505050565b60028301546000906001600160a01b0316158015906104835750816001600160a01b0316836001600160a01b031614155b801561049e575060028401546001600160a01b038481169116145b949350505050565b865460009088906001600160a01b031633146105045760405162461bcd60e51b815260206004820152601a60248201527f474d4c3a474f5645524e414e434520726f6c65206e6565646564000000000000604482015260640161025e565b61054585858080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152508a9250610dc8915050565b600081815260068b016020526040902060030154909250156105a05760405162461bcd60e51b815260206004820152601460248201527311d3530e985b1c9958591e481c1c9bdc1bdcd95960621b604482015260640161025e565b6105b28883634e414d4560e01b610dfc565b51156105f75760405162461bcd60e51b815260206004820152601460248201527311d3530e925108185b1c9958591e48195e1a5cdd60621b604482015260640161025e565b6001600160a01b03871661064d5760405162461bcd60e51b815260206004820152601e60248201527f474d4c3a434f4e54524f4c4c45522063616e204e4f54206265205a45524f0000604482015260640161025e565b851580159061065d575060058614155b6106a95760405162461bcd60e51b815260206004820152601860248201527f474d4c3a54595045206973204e4f4e45206f7220504f4f4c0000000000000000604482015260640161025e565b6201518083108015906106bf57506224ea008311155b61070b5760405162461bcd60e51b815260206004820152601d60248201527f474d4c3a696e76616c69642070726f706f73616c206475726174696f6e000000604482015260640161025e565b60006107178442611248565b90506040518060800160405280896001600160a01b0316815260200188815260200187878080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920182905250938552505050602091820184905285815260068d018252604090819020835181546001600160a01b0319166001600160a01b0390911617815583830151600182015590830151805191926107c792600285019290910190610f3b565b50606091820151600390910155604080518581526001600160a01b038b16602082015290810183905288917f1ff68ed75922b8da2edb71149ae5de14f24d950ccc82c7cc12254771915426c3910160405180910390a25050979650505050505050565b61085e604051806080016040528060006001600160a01b031681526020016000815260200160608152602001600081525090565b6000828152600684016020908152604091829020825160808101845281546001600160a01b0316815260018201549281019290925260028101805492939192918401916108aa9061129e565b80601f01602080910402602001604051908101604052809291908181526020018280546108d69061129e565b80156109235780601f106108f857610100808354040283529160200191610923565b820191906000526020600020905b81548152906001019060200180831161090657829003601f168201915b50505050508152602001600382015481525050905092915050565b6001830154600090819060609086906001600160a01b0316331461099d5760405162461bcd60e51b815260206004820152601660248201527511d3530e94d153905511481c9bdb19481b995959195960521b604482015260640161025e565b806003015442106109e55760405162461bcd60e51b815260206004820152601260248201527111d3530e94d15390551148195e1c1a5c995960721b604482015260640161025e565b60008581526006880160205260409020600301544210610a475760405162461bcd60e51b815260206004820152601a60248201527f474d4c3a4e4f5420616e206163746976652070726f706f73616c000000000000604482015260640161025e565b6000858152600688016020526040902080546001820154600290920180546001600160a01b039092169650919450610a7e9061129e565b80601f0160208091040260200160405190810160405280929190818152602001828054610aaa9061129e565b8015610af75780601f10610acc57610100808354040283529160200191610af7565b820191906000526020600020905b815481529060010190602001808311610ada57829003601f168201915b50505050509150610b1c85635459504560e01b8589610eae909392919063ffffffff16565b610b3586866921a7a72a2927a62622a960b11b87610d1a565b610b488686634e414d4560e01b85610ed6565b60008381526020878152604082208054600181810183559184529190922001869055831415610b8957610b8487856104486301e1338042611248565b610bb3565b8660040154831415610bb3576002870180546001600160a01b0319166001600160a01b0386161790555b60008581526006880160205260409081902042600390910155517f3ad93af63cb7967b23e4fb500b7d7d28b07516325dcf341f88bebf959d82c1cb90610bfc9087815260200190565b60405180910390a15093509350939050565b600182015482906001600160a01b03163314610c655760405162461bcd60e51b815260206004820152601660248201527511d3530e94d153905511481c9bdb19481b995959195960521b604482015260640161025e565b80600301544210610cad5760405162461bcd60e51b815260206004820152601260248201527111d3530e94d15390551148195e1c1a5c995960721b604482015260640161025e565b61044d83838560030154610d63565b6000836003016000610cce8585610f0f565b81526020810191909152604001600020546001600160a01b0316949350505050565b6000836001016000610d028585610f0f565b81526020019081526020016000205490509392505050565b80846003016000610d2b8686610f0f565b815260200190815260200160002060006101000a8154816001600160a01b0302191690836001600160a01b0316021790555050505050565b6001830180546001600160a01b0319166001600160a01b0384169081179091556003840182905560408051918252602082018390527f3f34afe456fb5b36c04b5d1e2ef0750086747ac542262fbf14a0b1aae5fd7ee8910160405180910390a1505050565b60008282604051602001610ddd9291906111a8565b60408051601f1981840301815291905280516020909101209392505050565b6060836002016000610e0e8585610f0f565b81526020019081526020016000208054610e279061129e565b80601f0160208091040260200160405190810160405280929190818152602001828054610e539061129e565b8015610ea05780601f10610e7557610100808354040283529160200191610ea0565b820191906000526020600020905b815481529060010190602001808311610e8357829003601f168201915b505050505090509392505050565b80846001016000610ebf8686610f0f565b815260208101919091526040016000205550505050565b80846002016000610ee78686610f0f565b81526020019081526020016000209080519060200190610f08929190610f3b565b5050505050565b604080516020808201949094528082019290925280518083038201815260609092019052805191012090565b828054610f479061129e565b90600052602060002090601f016020900481019282610f695760008555610faf565b82601f10610f8257805160ff1916838001178555610faf565b82800160010185558215610faf579182015b82811115610faf578251825591602001919060010190610f94565b50610fbb929150610fbf565b5090565b5b80821115610fbb5760008155600101610fc0565b80356001600160a01b0381168114610feb57600080fd5b919050565b6000806040838503121561100357600080fd5b8235915061101360208401610fd4565b90509250929050565b60008060006060848603121561103157600080fd5b8335925061104160208501610fd4565b915061104f60408501610fd4565b90509250925092565b600080600080600080600060c0888a03121561107357600080fd5b873596506020880135955061108a60408901610fd4565b945060608801359350608088013567ffffffffffffffff808211156110ae57600080fd5b818a0191508a601f8301126110c257600080fd5b8135818111156110d157600080fd5b8b60208285010111156110e357600080fd5b60208301955080945050505060a0880135905092959891949750929550565b60008060006060848603121561111757600080fd5b505081359360208301359350604090920135919050565b6000806040838503121561114157600080fd5b50508035926020909101359150565b60008060006060848603121561116557600080fd5b833592506020840135915061104f60408501610fd4565b6000815180845261119481602086016020860161126e565b601f01601f19169290920160200192915050565b600083516111ba81846020880161126e565b9190910191825250602001919050565b60018060a01b03841681528260208201526060604082015260006111f1606083018461117c565b95945050505050565b6020815260018060a01b03825116602082015260208201516040820152600060408301516080606084015261123260a084018261117c565b9050606084015160808401528091505092915050565b6000821982111561126957634e487b7160e01b600052601160045260246000fd5b500190565b60005b83811015611289578181015183820152602001611271565b83811115611298576000848401525b50505050565b600181811c908216806112b257607f821691505b602082108114156112d357634e487b7160e01b600052602260045260246000fd5b5091905056fea264697066735822122042f29ada45c4cd80c5c0bc51b44755f11c600157464399f790226483dc08646d64736f6c63430008070033",
  "devdoc": {
    "author": "Ice Bear & Crash Bandicoot",
    "details": "review: DataStoreModule for the IsolatedStorage logic.review: Reserved TYPEs are defined within globals/id_type.solSENATE_EXPIRY is not mandatory to utilize. Simply set it to MAX_UINT256 if rescueSenate is not needed.There are 3 ways to set a new Senate: 1. With a proposal TYPE 1. Proposal's controller becomes the new Senate, refreshes the expiry. 2. Current Senate can call changeSenate, which doesn't change the expiry 3. As a circuit breaker: If senate is expired, then rescue senate can be called by governance.Currently, there are no way to set a new Governance.Contracts relying on this library must use GeodeModuleLib.DualGovernanceThis is an external library, requires deployment.",
    "events": {
      "Proposed(uint256,uint256,address,uint256)": {
        "custom:section": "** EVENTS **"
      }
    },
    "kind": "dev",
    "methods": {
      "approveProposal(GeodeModuleLib.DualGovernance storage,DataStoreModuleLib.IsolatedStorage storage,uint256)": {
        "details": "Senate is not able to approve approved proposalsSenate is not able to approve expired proposals",
        "params": {
          "id": "given ID proposal that has will be approved by Senate"
        }
      },
      "changeIdCONTROLLER(DataStoreModuleLib.IsolatedStorage storage,uint256,address)": {
        "details": "this operation can not be reverted by the old CONTROLLER!!!can not provide address(0), try 0x000000000000000000000000000000000000dEaD"
      },
      "changeSenate(GeodeModuleLib.DualGovernance storage,address)": {
        "details": "Does not change the expiry"
      },
      "getProposal(GeodeModuleLib.DualGovernance storage,uint256)": {
        "custom:section": "** GETTER FUNCTIONS **",
        "custom:visibility": "-> view-external"
      },
      "isUpgradeAllowed(GeodeModuleLib.DualGovernance storage,address,address)": {
        "details": "provided for _authorizeUpgradecurrentImplementation should always be UUPS._getImplementation()currentImplementation or zero as proposedImplementation will return false*"
      },
      "propose(GeodeModuleLib.DualGovernance storage,DataStoreModuleLib.IsolatedStorage storage,address,uint256,bytes,uint256)": {
        "details": "DATASTORE[id] will not be updated until the proposal is approvedProposals can NEVER be overriden"
      },
      "rescueSenate(GeodeModuleLib.DualGovernance storage,address)": {
        "details": "Obviously, Governance needs to wait for SENATE_EXPIRY.Refreshes the expiry"
      }
    },
    "stateVariables": {
      "MAX_SENATE_PERIOD": {
        "details": "\"MAX\" underlines a new senate can be set without expecting an expiry"
      }
    },
    "title": "GML: Geode Module Library",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "MAX_SENATE_PERIOD()": {
        "notice": "if expiry is utilized, a senate can be active for a year."
      },
      "MIN_PROPOSAL_DURATION()": {
        "notice": "a proposal can have a duration between 1 days to 4 weeks (inclusive)"
      },
      "approveProposal(GeodeModuleLib.DualGovernance storage,DataStoreModuleLib.IsolatedStorage storage,uint256)": {
        "notice": "approves a proposal and records given data to DataStorespecific changes for the reserved types (1, 2, 3) are implemented here, any other addition should take place in Portal, as not related. Note that GM has additional logic for package type approvals."
      },
      "changeIdCONTROLLER(DataStoreModuleLib.IsolatedStorage storage,uint256,address)": {
        "notice": "change the CONTROLLER of an ID"
      },
      "changeSenate(GeodeModuleLib.DualGovernance storage,address)": {
        "notice": "It is useful to be able to change the Senate's address without changing the expiry."
      },
      "isUpgradeAllowed(GeodeModuleLib.DualGovernance storage,address,address)": {
        "notice": "Check if it is allowed to change the package version to given proposedImplementation."
      },
      "propose(GeodeModuleLib.DualGovernance storage,DataStoreModuleLib.IsolatedStorage storage,address,uint256,bytes,uint256)": {
        "notice": "generates a new ID with given TYPE and NAME, proposes it to be owned by a CONTROLLER."
      },
      "rescueSenate(GeodeModuleLib.DualGovernance storage,address)": {
        "notice": "changes Senate in a scenerio where the current Senate acts maliciously! * We are sure this will not be the case, but creating a method for possible recovery is a must.Normally, Governance creates Senate Proposals frequently to signal it does not have * any intent of malicious overtake. note: If Governance does not send a Senate Proposal \"a while\" before the SENATE_EXPIRY, * we recommend users to take their money out."
      }
    },
    "notice": "Dual Governance & Limited Upgradability: Administration of the Isolated Storage with a Dual Governance consisting a Governance and a Senate. Administration of a UUPS contract with Limited Upgradability for Packages like Portal, LiquidityPool.",
    "version": 1
  },
  "storageLayout": {
    "storage": [],
    "types": null
  }
}